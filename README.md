# try-csrf
study what is going on in CSRF

## クッキーがいつ送信されるのかを確認する（今の所それだけの実験である）

### 概要

- この実験はvue開発サーバ「http://127.0.0.1:8080/」でこのページを開き、goで立ち上げたhttpサーバ（http://localhost:8888/）へのリクエストを行う
- 目的としては、オリジンの異なるサイトへのリクエスト（攻撃サイトからのアタック）時に認証を突破できる可能性があるのかを確認することである。
  - つまりログイン済を承認させるcookieをターゲットに対して飛ばせることができるのかを確認する。
- 実際のところCSRFは可能なのか、SameSite属性はどのように作用するのか、ブラウザの挙動は皆おなじなのかを確認したい人向けである

### ポイント

- まずターゲットサイト上にてcookieを作成する（SameSite：なしとLaxの２つ）
  - ブラウザから直接作成する
- 攻撃サイトから各リクエストボタンを押し、ターゲットサーバのログ上にてcookieの有無を確認する。
  - ログに出れば攻撃サイトからターゲットサイトのcookieが送信されている
  - もしcookieが表示された場合、そのcookieでの認証は突破されたことを意味する。
- Cookieはポート番号では分離されないため、http://localhost:8888もhttp://localhost:8080も同一ドメインと判断されるため注意が必要である。
  - 必ずhttp://127.0.0.1:8080からアタックしているかを確認すること
  - 同一ドメインならばcookieが送信されるのは当たり前である。

### コマンド

```
//goにてターゲットサーバ起動　http://localhost:8888/
docker-compose up 

//攻撃サイト起動　http://127.0.0.1:8080
cd front-csrf
npm i
npm run serve
```

